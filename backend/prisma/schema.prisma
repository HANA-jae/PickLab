generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

// 음식 메뉴 (F001~F999)
model Food {
  id          Int       @id @default(autoincrement())
  foodCode    String    @unique @map("food_code")
  foodName    String    @map("food_name")
  foodEmoji   String    @map("food_emoji")
  category1   String?   @map("category1")
  category2   String?   @map("category2")
  category3   String?   @map("category3")
  category4   String?   @map("category4")
  category5   String?   @map("category5")
  useYn       String    @default("Y") @map("use_yn")
  createdUser String?   @map("created_user")
  createdDate DateTime? @default(now()) @map("created_date")
  updatedUser String?   @map("updated_user")
  updatedDate DateTime? @map("updated_date")

  @@map("tbl_food_info")
  @@index([useYn])
  @@index([foodCode])
}

// 게임 (G001~G999)
model Game {
  id            Int       @id @default(autoincrement())
  gameCode      String    @unique @map("game_code")
  gameName      String    @map("game_name")
  gameDesc      String?   @map("game_desc")
  gameEmoji     String    @map("game_emoji")
  gameDifficult String?   @map("game_difficult")
  useYn         String    @default("Y") @map("use_yn")
  createdUser   String?   @map("created_user")
  createdDate   DateTime? @default(now()) @map("created_date")
  updatedUser   String?   @map("updated_user")
  updatedDate   DateTime? @map("updated_date")

  @@map("tbl_game_info")
  @@index([useYn])
  @@index([gameCode])
}

// 퀴즈 (Q001~Q999)
model Quiz {
  id           Int       @id @default(autoincrement())
  quizCode     String    @unique @map("quiz_code")
  quizName     String    @map("quiz_name")
  quizDesc     String?   @map("quiz_desc")
  quizEmoji    String    @map("quiz_emoji")
  quizCategory String?   @map("quiz_category")
  useYn        String    @default("Y") @map("use_yn")
  createdUser  String?   @map("created_user")
  createdDate  DateTime? @default(now()) @map("created_date")
  updatedUser  String?   @map("updated_user")
  updatedDate  DateTime? @map("updated_date")

  @@map("tbl_quiz_info")
  @@index([useYn])
  @@index([quizCode])
}

// 감사 로그 (6개월 보존)
model AuditLog {
  id          Int      @id @default(autoincrement())
  code        String   // F001, G001, Q001 등
  contentType String   // Food, Game, Quiz
  action      String   // CREATE, UPDATE, DELETE, TOGGLE
  oldValue    Json?    // 변경 전 데이터
  newValue    Json?    // 변경 후 데이터
  adminName   String   @default("Anonymous") // 추후 로그인 연동
  ipAddress   String
  userAgent   String?
  timestamp   DateTime @default(now())
  createdAt   DateTime @default(now())

  @@index([code])
  @@index([contentType])
  @@index([createdAt])
}
